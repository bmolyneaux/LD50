[gd_scene load_steps=20 format=2]

[ext_resource path="res://fonts/LudumDairy.tres" type="DynamicFont" id=1]
[ext_resource path="res://fonts/RobotoBlack.tres" type="DynamicFont" id=2]
[ext_resource path="res://fonts/Roboto-Black.ttf" type="DynamicFontData" id=3]
[ext_resource path="res://buildings/BuildingPlacement.gd" type="Script" id=4]

[sub_resource type="SphereMesh" id=1]
radial_segments = 256
rings = 128

[sub_resource type="SpatialMaterial" id=2]
albedo_color = Color( 0.87451, 0.643137, 0.419608, 1 )

[sub_resource type="SpatialMaterial" id=8]
flags_transparent = true
albedo_color = Color( 0.239216, 0.788235, 0.937255, 0.890196 )
metallic = 0.5
roughness = 0.0
proximity_fade_enable = true
proximity_fade_distance = 0.02

[sub_resource type="Shader" id=9]
code = "shader_type spatial;

uniform sampler2D height_map;
uniform vec4 color : hint_color;

void fragment() {
	ALBEDO = color.rgb;
}

void vertex() {
	VERTEX = (0.85 + 0.1 * VERTEX.x) * ((0.85 * VERTEX) + (0.3 * VERTEX * texture(height_map, UV).x));
}
"

[sub_resource type="OpenSimplexNoise" id=5]

[sub_resource type="NoiseTexture" id=6]
seamless = true
noise = SubResource( 5 )

[sub_resource type="ShaderMaterial" id=4]
shader = SubResource( 9 )
shader_param/color = Color( 1, 1, 1, 1 )
shader_param/height_map = SubResource( 6 )

[sub_resource type="Shader" id=3]
code = "shader_type spatial;

uniform sampler2D height_map;
uniform vec4 grass_color : hint_color;
uniform vec4 dirt_color : hint_color;

void fragment() {
	float height = texture(height_map, UV).x;
	ALBEDO = mix(dirt_color, grass_color, smoothstep(0.49, 0.55, height)).rgb;
}

void vertex() {
	VERTEX = (0.85 * VERTEX) + (0.3 * VERTEX * texture(height_map, UV).x);
}
"

[sub_resource type="ShaderMaterial" id=7]
shader = SubResource( 3 )
shader_param/grass_color = Color( 0.227451, 0.733333, 0.121569, 1 )
shader_param/dirt_color = Color( 0.870588, 0.698039, 0.45098, 1 )
shader_param/height_map = SubResource( 6 )

[sub_resource type="SphereShape" id=15]

[sub_resource type="StyleBoxFlat" id=10]
bg_color = Color( 0.207843, 0.207843, 0.207843, 1 )
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color( 0.207843, 0.207843, 0.207843, 1 )

[sub_resource type="StyleBoxFlat" id=11]
bg_color = Color( 0, 0, 0, 1 )
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color( 0, 0, 0, 1 )

[sub_resource type="StyleBoxFlat" id=12]
bg_color = Color( 0.207843, 0.207843, 0.207843, 1 )
border_width_left = 4
border_width_top = 4
border_width_right = 4
border_width_bottom = 4
border_color = Color( 0.207843, 0.207843, 0.207843, 1 )

[sub_resource type="DynamicFont" id=14]
size = 24
font_data = ExtResource( 3 )

[sub_resource type="StyleBoxFlat" id=13]
bg_color = Color( 0, 0, 0, 1 )
border_width_left = 4
border_width_top = 4
border_width_right = 4
border_width_bottom = 4
border_color = Color( 0, 0, 0, 1 )

[node name="Root" type="Spatial"]

[node name="Planet" type="Spatial" parent="."]
transform = Transform( 0.388995, 0, -0.92124, 0, 1, 0, 0.92124, 0, 0.388995, 0, 0, 0 )

[node name="OldGround" type="MeshInstance" parent="Planet"]
visible = false
mesh = SubResource( 1 )
material/0 = SubResource( 2 )

[node name="Water" type="MeshInstance" parent="Planet"]
transform = Transform( 1.01, 0, 0, 0, 1.01, 0, 0, 0, 1.01, 0, 0, 0 )
mesh = SubResource( 1 )
material/0 = SubResource( 8 )

[node name="IceCap" type="MeshInstance" parent="Planet"]
transform = Transform( -4.80825e-08, -1.1, 0, 1.1, -4.80825e-08, 0, 0, 0, 1.1, 0, 0, 0 )
mesh = SubResource( 1 )
material/0 = SubResource( 4 )

[node name="Land" type="MeshInstance" parent="Planet"]
mesh = SubResource( 1 )
material/0 = SubResource( 7 )

[node name="StaticBody" type="StaticBody" parent="Planet"]

[node name="CollisionShape" type="CollisionShape" parent="Planet/StaticBody"]
shape = SubResource( 15 )

[node name="Camera Root" type="Spatial" parent="."]

[node name="Camera" type="Camera" parent="Camera Root"]
transform = Transform( 1, 0, 0, 1.49012e-08, 1, 1.49012e-08, -2.98023e-08, 1.49012e-08, 1, 1.19209e-07, 0, 2.43894 )

[node name="Camera Root2" type="Spatial" parent="."]
transform = Transform( 0.873458, 0.0465234, 0.484672, 0, 0.995425, -0.0955504, -0.4869, 0.0834592, 0.869462, 0, 0, 0 )

[node name="HUD" type="Control" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="TR" type="HBoxContainer" parent="HUD"]
anchor_left = 1.0
anchor_right = 1.0
margin_left = -73.0
margin_bottom = 23.0
size_flags_horizontal = 0
size_flags_vertical = 0
custom_constants/separation = 0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="LD" type="Label" parent="HUD/TR"]
margin_right = 25.0
margin_bottom = 23.0
size_flags_vertical = 1
custom_colors/font_color = Color( 1, 0.492188, 0, 1 )
custom_fonts/font = ExtResource( 1 )
custom_styles/normal = SubResource( 10 )
text = "LD"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="NEWS" type="Label" parent="HUD/TR"]
margin_left = 25.0
margin_right = 73.0
margin_bottom = 23.0
custom_fonts/font = ExtResource( 2 )
custom_styles/normal = SubResource( 11 )
text = "NEWS"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="BL" type="VBoxContainer" parent="HUD"]
anchor_top = 1.0
anchor_bottom = 1.0
margin_top = -64.0
margin_right = 417.0
custom_constants/separation = 0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="BREAKING NEWS" type="Label" parent="HUD/BL"]
margin_right = 133.0
margin_bottom = 27.0
size_flags_horizontal = 0
custom_fonts/font = ExtResource( 2 )
custom_styles/normal = SubResource( 12 )
text = "BREAKING NEWS"

[node name="Feed" type="Label" parent="HUD/BL"]
margin_top = 27.0
margin_right = 417.0
margin_bottom = 64.0
custom_fonts/font = SubResource( 14 )
custom_styles/normal = SubResource( 13 )
text = "THE PLANET IS GETTING TOO WARM"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="BR" type="HBoxContainer" parent="HUD"]
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -100.0
margin_top = -27.0
custom_constants/separation = 0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="MNY" type="Label" parent="HUD/BR"]
margin_right = 43.0
margin_bottom = 27.0
size_flags_horizontal = 0
custom_fonts/font = ExtResource( 2 )
custom_styles/normal = SubResource( 12 )
text = "MNY"

[node name="$$" type="Label" parent="HUD/BR"]
margin_left = 43.0
margin_right = 100.0
margin_bottom = 27.0
size_flags_horizontal = 0
custom_colors/font_color = Color( 0, 1, 0.203922, 1 )
custom_fonts/font = ExtResource( 2 )
custom_styles/normal = SubResource( 12 )
text = "$4,754"

[node name="BuildingPlacement" type="Spatial" parent="."]
script = ExtResource( 4 )
camera = NodePath("../Camera Root/Camera")
